"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.calcProrata = void 0;
const dayjs_1 = __importDefault(require("dayjs"));
function calcProrata(start, end, currentDate, { dimension = 'month', endInclusive = false, } = {}) {
    const checkIn = (0, dayjs_1.default)(start).startOf('day');
    let checkOut = (0, dayjs_1.default)(end).startOf('day');
    if (endInclusive)
        checkOut = checkOut.add(1, 'day');
    const totalDays = Math.abs(checkIn.diff(checkOut, 'days'));
    let current = (0, dayjs_1.default)(checkIn);
    let days = 0;
    while (current < checkOut) {
        if (current.isSame(currentDate, dimension)) {
            days = days + 1;
        }
        current = current.add(1, 'day');
    }
    return {
        ratio: days / totalDays,
        totalDays,
        daysInCurrent: days,
    };
}
exports.calcProrata = calcProrata;
