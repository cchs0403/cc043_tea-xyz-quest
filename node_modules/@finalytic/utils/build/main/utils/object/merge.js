"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.merge = void 0;
const isObject = (item) => typeof item === 'object' && !Array.isArray(item);
const merge = (target, source) => {
    if (!target)
        target = {};
    if (!source)
        source = {};
    const isDeep = (prop) => isObject(source[prop]) && target[prop] && isObject(target[prop]);
    const replaced = Object.getOwnPropertyNames(source)
        .map((prop) => ({
        [prop]: isDeep(prop) ? (0, exports.merge)(target[prop], source[prop]) : source[prop],
    }))
        .reduce((a, b) => {
        for (const key in b)
            a[key] = b[key];
        return a;
    }, {});
    return {
        ...target,
        ...replaced,
    };
};
exports.merge = merge;
