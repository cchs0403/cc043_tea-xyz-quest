import currency from 'currency.js';

export function bankersRound(n?: number | string | null, d = 2) {
  if (!n) {
    return 0;
  }
  if (typeof n === 'string') {
    n = currency(n).value;
  }
  const x = n * 10 ** d;
  const r = Math.round(x);
  const br = Math.abs(x) % 1 === 0.5 ? (r % 2 === 0 ? r : r - 1) : r;
  return br / 10 ** d;
}

export function bankersRoundToCents(amount?: string | number) {
  return Math.round(bankersRound(amount) * 100);
}
